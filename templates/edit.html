<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Student</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <h2><i class="fas fa-user-edit"></i> Edit Student Details</h2>

    <div class="form-card">
      <form method="POST" onsubmit="return validateEditForm()">
        <div class="form-group">
          <label for="name"><i class="fas fa-user"></i> Name</label><br>
          <input type="text" name="name" id="name" value="{{ student[1] }}" required pattern="^[A-Za-z\s]+$">
        </div>

        <div class="form-group">
          <label for="email"><i class="fas fa-envelope"></i> Email</label><br>
          <input type="email" name="email" id="email" value="{{ student[2] }}" required>
        </div>

        <div class="form-group">
          <label for="phone"><i class="fas fa-phone"></i> Phone</label><br>
          <input type="text" name="phone" id="phone" value="{{ student[3] }}" required pattern="^\d{10}$">
        </div>

        <div class="form-group">
          <label for="address"><i class="fas fa-map-marker-alt"></i> Address</label><br>
          <input type="text" name="address" id="address" value="{{ student[4] }}" required pattern="^[A-Za-z0-9\s,.-]+$">
        </div>

        <div class="form-actions">
          <input type="submit" value="Update" class="btn-primary">
          <a href="{{ url_for('student_bp.view_students') }}" class="button-link"><i class="fas fa-arrow-left"></i> Back</a>
        </div>
      </form>
    </div>
  </div>

  <script>
    function validateEditForm() {
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const address = document.getElementById('address').value.trim();

      const nameRegex = /^[A-Za-z\s]+$/;
      const phoneRegex = /^\d{10}$/;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const addressRegex = /^[A-Za-z0-9\s,.-]+$/;

      if (!nameRegex.test(name)) {
        alert("Name must contain only letters.");
        return false;
      }
      if (!phoneRegex.test(phone)) {
        alert("Phone number must be exactly 10 digits.");
        return false;
      }
      if (!emailRegex.test(email)) {
        alert("Please enter a valid email address.");
        return false;
      }
      if (!addressRegex.test(address)) {
        alert("Address can contain only letters, numbers, spaces, commas, dots, and hyphens.");
        return false;
      }

      return true;
    }
  </script>
</body>
</html>
